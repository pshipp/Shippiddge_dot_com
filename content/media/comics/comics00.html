<style>
  /* VIEWER STYLES */
  #imageViewerContainer {
    background: #000;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 2rem;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 400px;
  }

  /* New style for the link wrapper */
  #mainLink {
    display: block;
    max-width: 100%;
    max-height: 80vh; /* Keeps the link strictly within bounds */
    cursor: zoom-in;  /* Visual cue that the image can be opened */
  }

  #mainImage {
    max-width: 100%;
    max-height: 80vh;
    display: block;
    object-fit: contain;
  }

  .nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    padding: 1rem;
    cursor: pointer;
    font-size: 2rem;
    z-index: 10;
    transition: background 0.3s;
    user-select: none;
  }

  .nav-btn:hover { background-color: rgba(0, 0, 0, 0.8); }
  .prev-btn { left: 0; }
  .next-btn { right: 0; }
  
  .img-btn.active-thumb {
    outline: 3px solid #007bff;
    transform: scale(1.02);
  }
</style>
<h1 style="text-align:center; font-family: 'Lucida Console'">COMICS</h1>
 <br>
<div id="bigPlayer" class="mb-4">
  
  <div id="imageViewerContainer">
    <button class="nav-btn prev-btn" id="prevBtn">&#10094;</button>
    
    <a id="mainLink" href="" target="_blank" title="Click to open full size">
      <img id="mainImage" src="" alt="Select an image below">
    </a>

    <button class="nav-btn next-btn" id="nextBtn">&#10095;</button>
  </div>
  
  <h4 id="mainCaption" class="text-center mt-2">Select an image</h4>
</div>


<script>
document.addEventListener("DOMContentLoaded", function() {
  const mainImage = document.getElementById('mainImage');
  const mainLink = document.getElementById('mainLink');
  const mainCaption = document.getElementById('mainCaption');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const bigPlayer = document.getElementById('bigPlayer');

  let currentSection = null;
  let currentIndex = 0;

  function getCurrentSectionButtons() {
    if (!currentSection) return [];
    return Array.from(currentSection.querySelectorAll('.img-btn'));
  }

  function updateViewer(index) {
    const sectionButtons = getCurrentSectionButtons();
    if (sectionButtons.length === 0) return;

    // Wrap around within the current section
    if (index < 0) index = sectionButtons.length - 1;
    if (index >= sectionButtons.length) index = 0;

    currentIndex = index;
    const selectedThumb = sectionButtons[currentIndex];
    const fullSrc = selectedThumb.getAttribute('data-full-src');

    // Update Image, Link, and Caption
    mainImage.src = fullSrc;
    mainLink.href = fullSrc;
    mainCaption.textContent = selectedThumb.getAttribute('data-caption');

    // Remove active class from ALL thumbnails on page
    document.querySelectorAll('.img-btn').forEach(btn => btn.classList.remove('active-thumb'));
    selectedThumb.classList.add('active-thumb');
  }

  // Event Delegation for Thumbnails
  document.body.addEventListener('click', function(e) {
    const btn = e.target.closest('.img-btn');
    if (btn) {
      // Find which section this button belongs to
      currentSection = btn.closest('[data-section]');
      const sectionButtons = getCurrentSectionButtons();
      const index = sectionButtons.indexOf(btn);
      updateViewer(index);
      bigPlayer.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  });

  // Button navigation
  prevBtn.addEventListener('click', () => updateViewer(currentIndex - 1));
  nextBtn.addEventListener('click', () => updateViewer(currentIndex + 1));

  // Keyboard navigation
  document.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowLeft') {
      e.preventDefault();
      updateViewer(currentIndex - 1);
    } else if (e.key === 'ArrowRight') {
      e.preventDefault();
      updateViewer(currentIndex + 1);
    }
  });

  // Initialize with first section
  const firstSection = document.querySelector('[data-section]');
  if (firstSection) {
    currentSection = firstSection;
    updateViewer(0);
  }
});
</script>